# ADR-0006: 採用 ASP.NET Core 作為後端框架

## 狀態

已接受

## 背景

原微服務電商平台基於 Node.js 和 Express.js 構建。為了更好地利用 C# 語言特性、靜態類型檢查以及 .NET 生態系統的優勢，我們需要評估將後端技術棧轉換為 ASP.NET Core 的可行性和影響。

## 決策

我們決定將後端技術棧從 Node.js/Express 轉換為 ASP.NET Core，同時保留 React 作為前端 SPA 框架。

## 考量因素

- 開發團隊的技術熟悉度
- 靜態類型系統帶來的優勢
- 本地開發環境的易用性
- 與現有前端 SPA 的整合
- 微服務架構的適配性
- 性能和可擴展性需求
- 長期維護和支持

## 方案

### 方案1: 採用 ASP.NET Core（已選擇）

將後端服務轉換為使用 ASP.NET Core 開發。

**優點:**
- 強類型系統，減少運行時錯誤
- 完善的 IDE 支持（Visual Studio、Rider 等）
- 優秀的性能表現
- 內置依賴注入和中間件系統
- 與 Entity Framework Core 良好整合
- 微軟官方長期支持
- 跨平台支持

**缺點:**
- 與原 Node.js 代碼不兼容，需要重寫
- 可能增加本地開發環境的資源需求
- Docker 映像相對較大
- 開發團隊可能需要學習曲線

### 方案2: 保留 Node.js/Express

繼續使用原有的 Node.js/Express 技術棧。

**優點:**
- 無需代碼遷移
- 開發團隊已熟悉
- JavaScript 前後端統一語言
- 較低的資源消耗

**缺點:**
- 缺乏強類型系統的優勢
- 大型項目中可能面臨維護挑戰
- 性能可能不如 ASP.NET Core

## 影響

- **技術影響**: 需要重寫所有後端服務，採用 C# 和 .NET Core 生態系統
- **資源影響**: 本地開發可能需要更多資源，但可通過容器化管理
- **學習影響**: 開發團隊需要熟悉 C# 和 ASP.NET Core
- **前端影響**: 需要調整前端與後端的整合方式，但基本架構不變

## 實施計劃

1. 建立 ASP.NET Core 專案模板和基礎架構
2. 逐個微服務進行遷移，優先從較簡單的服務開始
3. 更新 Docker 配置，使用 .NET Core 映像
4. 調整前端 API 客戶端以適應新的後端
5. 更新開發文檔和指南

## 評估指標

- 開發效率
- 運行性能
- 代碼質量和可維護性
- 本地開發體驗
- API 一致性和兼容性

## 相關決策

- [ADR-0001](0001-microservices-decomposition.md) - 微服務拆分決策
- [ADR-0003](0003-service-communication-mechanism.md) - 服務通訊機制決策
- [ADR-0005](0005-containerization-strategy.md) - 容器化策略決策